<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enugu State Union Austria</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&family=Open+Sans:wght@300;400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css">
    <link rel="stylesheet" href="./css/index.css">
    <style>
        .loading-spinner {
            text-align: center;
            padding: 50px;
            color: var(--text-color);
        }
        .loading-spinner i {
            font-size: 2rem;
            animation: spin 1s linear infinite;
        }
        .error-message {
            text-align: center;
            padding: 50px;
            color: var(--notification-red);
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .notification-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1500;
        }
        .notification {
            background: var(--card-bg);
            border-radius: 8px;
            padding: 15px 20px;
            margin-bottom: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            display: flex;
            align-items: center;
            gap: 10px;
            transform: translateX(100%);
            opacity: 0;
            transition: transform 0.3s, opacity 0.3s;
        }
        .notification.show {
            transform: translateX(0);
            opacity: 1;
        }
        .notification-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 18px;
            background-color: var(--primary-green);
        }
        .notification-content {
            flex: 1;
        }
        .notification-title {
            font-weight: 600;
            margin-bottom: 5px;
        }
        .notification-message {
            font-size: 14px;
            color: var(--text-color);
        }
        .notification-close {
            background: none;
            border: none;
            color: #999;
            cursor: pointer;
            font-size: 16px;
        }
    </style>
</head>
<body class="light-mode">
    <div class="notification-container" id="notificationContainer"></div>

    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container">
            <a class="navbar-brand" href="#">
                <img src="./img/logo.png" alt="ESUA Logo" class="brand-logo">
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link active" href="#">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#about">About Us</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="./pages/annoucement.html">Announcements</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#events">Events</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="./pages/contact.html">Contact</a>
                    </li>
                    <li class="nav-item">
                        <button class="mode-toggle" id="modeToggle">
                            <i class="fas fa-moon"></i>
                        </button>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <section class="hero">
        <div class="hero-content">
            <h1 class="hero-title">Enugu State Union Austria</h1>
            <p class="hero-subtitle">Promoting Unity, Culture, and Progress for Enugu State Citizens in Austria</p>
            <a href="#about" class="btn btn-hero">Discover More</a>
        </div>
    </section>

    <section id="about" class="about-container">
        <div class="container py-5">
            <div class="bg-elements">
                <div class="bg-element bg-1"></div>
                <div class="bg-element bg-2"></div>
                <div class="bg-element bg-3"></div>
                <div class="decorative-line line-1"></div>
                <div class="decorative-line line-2"></div>
            </div>
            <h2 class="section-title2 text-center w-100">About Us</h2>
            <div class="about-content">
                <div class="d-flex justify-content-center">
                    <div class="logo-container">
                        <img src="./img/main-logo.png" alt="Enugu State Union Austria Logo">
                    </div>
                </div>
                <p class="lead">The Enugu State Union Austria is a community organization dedicated to uniting citizens of Enugu State living in Austria. We strive to preserve our cultural heritage, support our members, and contribute to the development of our home state.</p>
                <div class="text-center">
                    <a href="#" class="btn-modern">View More</a>
                </div>
                <div class="row mt-5">
                    <div class="col-md-4 mb-4">
                        <div class="feature-card">
                            <div class="feature-icon">
                                <i class="fas fa-bullseye"></i>
                            </div>
                            <h5 class="card-title">Our Mission</h5>
                            <p class="card-text">To foster unity among Enugu State indigenes in Austria and promote our cultural heritage while supporting development initiatives back home.</p>
                        </div>
                    </div>
                    <div class="col-md-4 mb-4">
                        <div class="feature-card">
                            <div class="feature-icon">
                                <i class="fas fa-eye"></i>
                            </div>
                            <h5 class="card-title">Our Vision</h5>
                            <p class="card-text">To create a strong, supportive community that serves as a bridge between Austria and Enugu State for cultural exchange and development.</p>
                        </div>
                    </div>
                    <div class="col-md-4 mb-4">
                        <div class="feature-card">
                            <div class="feature-icon">
                                <i class="fas fa-hand-holding-heart"></i>
                            </div>
                            <h5 class="card-title">Our Values</h5>
                            <p class="card-text">Unity, Integrity, Cultural Preservation, Community Support, and Development.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="executives" class="executive-section">
        <div class="container">
            <h2 class="section-title">Our Executives</h2>
            <div class="developer-grid" id="executives-grid">
                <div class="loading-spinner"><i class="fas fa-spinner"></i> Loading executives...</div>
            </div>
        </div>
    </section>

    <section id="events" class="events-section">
        <div class="container">
            <h2 class="section-title">Past Events</h2>
            <div class="swiper eventSwiper">
                <div class="swiper-wrapper" id="events-swiper">
                    <div class="swiper-slide">
                        <div class="loading-spinner"><i class="fas fa-spinner"></i> Loading events...</div>
                    </div>
                </div>
                <div class="swiper-button-next"></div>
                <div class="swiper-button-prev"></div>
                <div class="swiper-pagination"></div>
            </div>
        </div>
    </section>

    <section id="videos" class="videos-section">
        <div class="container">
            <h2 class="section-title">Past Event Videos</h2>
            <div class="swiper videoSwiper">
                <div class="swiper-wrapper" id="videos-swiper">
                    <div class="swiper-slide">
                        <div class="loading-spinner"><i class="fas fa-spinner"></i> Loading videos...</div>
                    </div>
                </div>
                <div class="swiper-button-next vid-btn"></div>
                <div class="swiper-button-prev vid-btn"></div>
                <div class="swiper-pagination"></div>
            </div>
        </div>
    </section>

    <section id="contact" class="contact-section">
        <div class="container">
            <h2 class="section-title">Get In Touch</h2>
            <div class="row">
                <div class="col-lg-7 mb-5 mb-lg-0">
                    <div class="contact-form">
                        <form id="contactForm">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <input type="text" class="form-control" id="name" placeholder="Your Name" required>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <input type="email" class="form-control" id="email" placeholder="Your Email" required>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <input type="text" class="form-control" id="subject" placeholder="Subject" required>
                            </div>
                            <div class="form-group">
                                <textarea class="form-control" id="message" rows="5" placeholder="Your Message" required></textarea>
                            </div>
                            <button type="submit" class="btn btn-hero w-100">Send Message</button>
                        </form>
                    </div>
                </div>
                <div class="col-lg-5">
                    <div class="contact-info">
                        <h3>Get In Touch</h3>
                        <div class="contact-detail">
                            <div class="contact-icon">
                                <i class="fas fa-map-marker-alt"></i>
                            </div>
                            <div>
                                <h5>Location</h5>
                                <p>123 Union Street, Vienna, Austria</p>
                            </div>
                        </div>
                        <div class="contact-detail">
                            <div class="contact-icon">
                                <i class="fas fa-phone"></i>
                            </div>
                            <div>
                                <h5>Phone</h5>
                                <p>+43 123 456 789</p>
                            </div>
                        </div>
                        <div class="contact-detail">
                            <div class="contact-icon">
                                <i class="fas fa-envelope"></i>
                            </div>
                            <div>
                                <h5>Email</h5>
                                <p>info@enuguaustriaunion.com</p>
                            </div>
                        </div>
                        <div class="social-icons mt-5">
                            <a href="#"><i class="fab fa-facebook-f"></i></a>
                            <a href="#"><i class="fab fa-twitter"></i></a>
                            <a href="#"><i class="fab fa-instagram"></i></a>
                            <a href="#"><i class="fab fa-linkedin-in"></i></a>
                            <a href="#"><i class="fab fa-youtube"></i></a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <footer>
        <div class="container">
            <div class="row">
                <div class="col-lg-4 mb-5 mb-lg-0">
                    <h5 class="footer-title">Enugu State Union Austria</h5>
                    <p>Promoting unity, culture, and progress for Enugu State citizens in Austria.</p>
                    <div class="social-icons mt-4">
                        <a href="#"><i class="fab fa-facebook-f"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-linkedin-in"></i></a>
                        <a href="#"><i class="fab fa-youtube"></i></a>
                    </div>
                </div>
                <div class="col-lg-4 mb-5 mb-lg-0">
                    <h5 class="footer-title">Quick Links</h5>
                    <div class="footer-links">
                        <a href="#">Home</a>
                        <a href="#about">About Us</a>
                        <a href="#executives">Executives</a>
                        <a href="#events">Events</a>
                        <a href="#videos">Videos</a>
                        <a href="#contact">Contact</a>
                    </div>
                </div>
                <div class="col-lg-4">
                    <h5 class="footer-title">Newsletter</h5>
                    <p>Subscribe to our newsletter for updates on events and activities.</p>
                    <div class="newsletter-form">
                        <input type="email" class="newsletter-input" placeholder="Your Email">
                        <button class="newsletter-btn">Subscribe</button>
                    </div>
                </div>
            </div>
            <div class="text-center copyright">
                <p>&copy; <span id="year"></span> Enugu State Union Austria. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js"></script>
    <script>
        const BASE_URL = 'https://api.enuguaustriaunion.com'; // Replace with actual API base URL

        document.addEventListener('DOMContentLoaded', () => {
            fetchExecutives();
            fetchEvents();
            fetchVideos();
        });

        function fetchExecutives() {
            const grid = document.getElementById('executives-grid');
            grid.innerHTML = '<div class="loading-spinner"><i class="fas fa-spinner"></i> Loading executives...</div>';

            fetch(`${BASE_URL}/users/exec`)
                .then(response => response.json())
                .then(data => {
                    grid.innerHTML = '';
                    if (data.length === 0) {
                        grid.innerHTML = '<div class="error-message">No executives available.</div>';
                        return;
                    }
                    data.forEach(exec => {
                        grid.innerHTML += `
                            <div class="main-developer-card">
                                <div class="developer-card">
                                    <div class="developer-img">
                                        <img src="${exec.imageUrl || 'https://via.placeholder.com/150'}" alt="${exec.name}">
                                    </div>
                                    <div class="developer-content">
                                        <h4>${exec.name}</h4>
                                        <p><span>${exec.position}</span></p>
                                    </div>
                                </div>
                            </div>
                        `;
                    });
                    showNotification('Executives Loaded', 'Executive profiles have been updated.');
                })
                .catch(error => {
                    console.error('Error fetching executives:', error);
                    grid.innerHTML = '<div class="error-message">Failed to load executives. Please try again later.</div>';
                });
        }

        function fetchEvents() {
            const swiperWrapper = document.getElementById('events-swiper');
            swiperWrapper.innerHTML = '<div class="swiper-slide"><div class="loading-spinner"><i class="fas fa-spinner"></i> Loading events...</div></div>';

            fetch(`${BASE_URL}/users/events`)
                .then(response => response.json())
                .then(data => {
                    const pastEvents = data.filter(event => event.status === 'past');
                    swiperWrapper.innerHTML = '';
                    if (pastEvents.length === 0) {
                        swiperWrapper.innerHTML = '<div class="swiper-slide"><div class="error-message">No past events available.</div></div>';
                    } else {
                        pastEvents.forEach(event => {
                            swiperWrapper.innerHTML += `
                                <div class="swiper-slide" style="background-image: url('${event.imageUrl || 'https://via.placeholder.com/600'}');">
                                    <div class="event-caption">
                                        <h3>${event.title}</h3>
                                        <p>${event.description}</p>
                                    </div>
                                </div>
                            `;
                        });
                        showNotification('Events Loaded', 'Past events have been updated.');
                    }
                    initializeEventSwiper();
                })
                .catch(error => {
                    console.error('Error fetching events:', error);
                    swiperWrapper.innerHTML = '<div class="swiper-slide"><div class="error-message">Failed to load events. Please try again later.</div></div>';
                    initializeEventSwiper();
                });
        }

        function fetchVideos() {
            const swiperWrapper = document.getElementById('videos-swiper');
            swiperWrapper.innerHTML = '<div class="swiper-slide"><div class="loading-spinner"><i class="fas fa-spinner"></i> Loading videos...</div></div>';

            fetch(`${BASE_URL}/users/events`)
                .then(response => response.json())
                .then(data => {
                    const videoEvents = data.filter(event => event.videoUrl);
                    swiperWrapper.innerHTML = '';
                    if (videoEvents.length === 0) {
                        swiperWrapper.innerHTML = '<div class="swiper-slide"><div class="error-message">No event videos available.</div></div>';
                    } else {
                        videoEvents.forEach(event => {
                            const thumbnail = event.videoUrl.includes('youtube.com') 
                                ? `https://img.youtube.com/vi/${event.videoUrl.split('v=')[1]}/maxresdefault.jpg`
                                : 'https://via.placeholder.com/600';
                            swiperWrapper.innerHTML += `
                                <div class="swiper-slide">
                                    <div class="video-item">
                                        <div class="video-thumbnail">
                                            <img src="${thumbnail}" alt="${event.title}">
                                            <a href="${event.videoUrl}" data-fancybox="gallery" class="play-btn">
                                                <i class="fas fa-play-circle"></i>
                                            </a>
                                        </div>
                                        <div class="video-info">
                                            <h5>${event.title}</h5>
                                            <p>${event.description}</p>
                                        </div>
                                    </div>
                                </div>
                            `;
                        });
                        showNotification('Videos Loaded', 'Event videos have been updated.');
                    }
                    initializeVideoSwiper();
                })
                .catch(error => {
                    console.error('Error fetching videos:', error);
                    swiperWrapper.innerHTML = '<div class="swiper-slide"><div class="error-message">Failed to load videos. Please try again later.</div></div>';
                    initializeVideoSwiper();
                });
        }

        function initializeEventSwiper() {
            new Swiper(".eventSwiper", {
                spaceBetween: 30,
                effect: "fade",
                loop: true,
                autoplay: {
                    delay: 5000,
                    disableOnInteraction: false,
                },
                navigation: {
                    nextEl: ".swiper-button-next",
                    prevEl: ".swiper-button-prev",
                },
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                },
            });
        }

        function initializeVideoSwiper() {
            new Swiper(".videoSwiper", {
                slidesPerView: 1,
                spaceBetween: 30,
                loop: true,
                autoplay: {
                    delay: 4000,
                    disableOnInteraction: false,
                },
                navigation: {
                    nextEl: ".swiper-button-next.vid-btn",
                    prevEl: ".swiper-button-prev.vid-btn",
                },
                pagination: {
                    el: ".swiper-pagination",
                    clickable: true,
                },
                breakpoints: {
                    640: { slidesPerView: 1 },
                    768: { slidesPerView: 2 },
                    1024: { slidesPerView: 3 },
                },
            });
        }

        function showNotification(title, message) {
            const notification = document.createElement('div');
            notification.className = 'notification';
            notification.innerHTML = `
                <div class="notification-icon"><i class="fas fa-bell"></i></div>
                <div class="notification-content">
                    <div class="notification-title">${title}</div>
                    <div class="notification-message">${message}</div>
                </div>
                <button class="notification-close"><i class="fas fa-times"></i></button>
            `;
            document.getElementById('notificationContainer').appendChild(notification);
            setTimeout(() => notification.classList.add('show'), 100);
            notification.querySelector('.notification-close').addEventListener('click', () => {
                notification.classList.remove('show');
                setTimeout(() => notification.remove(), 300);
            });
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.classList.remove('show');
                    setTimeout(() => notification.remove(), 300);
                }
            }, 5000);
            triggerUserWebsiteNotification();
        }

        function triggerUserWebsiteNotification() {
            console.log('Triggering user website notification pop animation');
            // Replace with actual implementation of your website's notification animation
        }

        document.getElementById('modeToggle').addEventListener('click', function() {
            const body = document.body;
            const icon = this.querySelector('i');
            if (body.classList.contains('light-mode')) {
                body.classList.remove('light-mode');
                body.classList.add('dark-mode');
                icon.classList.remove('fa-moon');
                icon.classList.add('fa-sun');
            } else {
                body.classList.remove('dark-mode');
                body.classList.add('light-mode');
                icon.classList.remove('fa-sun');
                icon.classList.add('fa-moon');
            }
        });

        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const targetId = this.getAttribute('href');
                if (targetId === '#') return;
                const targetElement = document.querySelector(targetId);
                if (targetElement) {
                    window.scrollTo({
                        top: targetElement.offsetTop - 70,
                        behavior: 'smooth'
                    });
                }
            });
        });

        document.getElementById('contactForm').addEventListener('submit', function(e) {
            e.preventDefault();
            showNotification('Message Sent', 'Thank you for your message! We will get back to you soon.');
            this.reset();
        });

        document.querySelector('.newsletter-btn').addEventListener('click', function() {
            const email = document.querySelector('.newsletter-input').value;
            if (email && isValidEmail(email)) {
                showNotification('Subscribed', 'Thank you for subscribing to our newsletter!');
                document.querySelector('.newsletter-input').value = '';
            } else {
                showNotification('Error', 'Please enter a valid email address.');
            }
        });

        function isValidEmail(email) {
            const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return re.test(email);
        }

        window.addEventListener('scroll', function() {
            const navbar = document.querySelector('.navbar');
            if (window.scrollY > 50) {
                navbar.style.background = 'rgba(18, 18, 18, 0.95)';
                navbar.style.padding = '10px 0';
            } else {
                navbar.style.background = 'rgba(18, 18, 18, 0.95)';
                navbar.style.padding = '15px 0';
            }
        });

        document.getElementById("year").textContent = new Date().getFullYear();
    </script>
</body>
</html>